<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ­ Candy Crush - KazanÃ§ Oyunu</title>
    
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Candy Crush Styles -->
    <link rel="stylesheet" href="candy-styles.css">
    
    <!-- TronLink iÃ§in -->
    <script src="https://cdn.jsdelivr.net/npm/tronweb@latest/dist/TronWeb.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="candy-styles.css">
</head>
<body>
    <div id="app">
        <!-- YÃ¼kleme ekranÄ± -->
        <div id="loading-screen" class="loading-screen">
            <div class="loader"></div>
            <p>ğŸ­ Candy Crush yÃ¼kleniyor...</p>
            <p>ğŸ’° OynayÄ±n ve USDT kazanÄ±n!</p>
        </div>

        <!-- Ana oyun ekranÄ± -->
        <div id="game-container" class="game-container hidden">
            <!-- Ãœst bilgi Ã§ubuÄŸu -->
            <div class="header">
                <div class="level-info">
                    <span id="level-display">Seviye: 1</span>
                    <span id="moves-display">Hamle: 30</span>
                </div>
                <div class="score-info">
                    <span id="score-display">Skor: 0</span>
                    <span id="coins-display" class="coins">ğŸ’° 0</span>
                </div>
            </div>

            <!-- Hedef ve ilerleme -->
            <div class="target-section">
                <div class="target-info">
                    <span>Hedef: <span id="target-display">1000</span></span>
                </div>
                <div class="progress-container">
                    <div id="progress-bar" class="progress-bar"></div>
                </div>
            </div>

            <!-- Oyun tahtasÄ± -->
            <div id="game-board" class="game-board">
                <!-- Candy'ler JavaScript ile oluÅŸturulacak -->
            </div>

            <!-- Alt menÃ¼ -->
            <div class="bottom-menu">
                <button id="daily-bonus-btn" class="menu-btn">
                    ğŸ GÃ¼nlÃ¼k Bonus
                </button>
                <button id="withdraw-btn" class="menu-btn withdraw-btn">
                    ğŸ’³ Ã‡ek (USDT)
                </button>
                <button id="connect-wallet-btn" class="menu-btn wallet-btn">
                    ğŸ”— Wallet BaÄŸla
                </button>
            </div>

            <!-- Wallet bilgisi -->
            <div class="wallet-info">
                <span id="wallet-address">Wallet baÄŸlanmamÄ±ÅŸ</span>
            </div>
        </div>

        <!-- Level tamamlama modalÄ± -->
        <div id="level-complete-modal" class="modal hidden">
            <div class="modal-content">
                <h2>ğŸ‰ Seviye TamamlandÄ±!</h2>
                <div class="completion-stats">
                    <div class="stat">
                        <span class="stat-label">Skor:</span>
                        <span id="level-score" class="stat-value">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Toplam Coin:</span>
                        <span id="level-coins" class="stat-value">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Ã‡ekilebilir:</span>
                        <span class="stat-value">
                            <span id="withdrawable-usdt">0</span> USDT
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game over modalÄ± -->
        <div id="game-over-modal" class="modal hidden">
            <div class="modal-content">
                <h2>ğŸ˜¢ Oyun Bitti</h2>
                <p>Hedefe ulaÅŸamadÄ±nÄ±z!</p>
                <div class="completion-stats">
                    <div class="stat">
                        <span class="stat-label">Skor:</span>
                        <span id="final-score" class="stat-value">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Toplam Coin:</span>
                        <span id="final-coins" class="stat-value">0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ã‡ekim modalÄ± -->
        <div id="withdraw-modal" class="modal hidden">
            <div class="modal-content">
                <h2>ğŸ’³ USDT Ã‡ekimi</h2>
                <div class="withdraw-info">
                    <p>Ã‡ekilebilir miktar: <strong><span id="available-usdt">0</span> USDT</strong></p>
                    <p>Minimum Ã§ekim: <strong>5 USDT</strong></p>
                    <p>1000 Coin = 1 USDT</p>
                </div>
                
                <div class="withdraw-form">
                    <input type="number" id="withdraw-amount" placeholder="Ã‡ekim miktarÄ± (USDT)" min="5">
                    <button id="process-withdraw-btn" class="action-btn primary">
                        âœ… Ã‡ekim Yap
                    </button>
                    <button id="close-withdraw-btn" class="action-btn secondary">
                        âŒ Ä°ptal
                    </button>
                </div>
                
                <div class="withdraw-note">
                    <small>ğŸ’¡ Ã‡ekim iÅŸlemleri 24 saat iÃ§inde TRON TRC20 aÄŸÄ±ndan iÅŸlenir.</small>
                </div>
            </div>
        </div>

        <!-- Bonus kurallarÄ± modalÄ± -->
        <div id="rules-modal" class="modal hidden">
            <div class="modal-content">
                <h2>ğŸ® Oyun KurallarÄ±</h2>
                <div class="rules-content">
                    <h3>ğŸ­ NasÄ±l OynanÄ±r?</h3>
                    <ul>
                        <li>3 veya daha fazla aynÄ± candy'yi eÅŸleÅŸtirin</li>
                        <li>Her eÅŸleÅŸtirmede coin kazanÄ±n</li>
                        <li>Hamle sayÄ±nÄ±z sÄ±nÄ±rlÄ±, hedefi yakalamaya Ã§alÄ±ÅŸÄ±n</li>
                    </ul>
                    
                    <h3>ğŸ’° Coin Kazanma OranlarÄ±</h3>
                    <ul>
                        <li>3'lÃ¼ eÅŸleÅŸtirme: 10 Coin</li>
                        <li>4'lÃ¼ eÅŸleÅŸtirme: 25 Coin</li>
                        <li>5'li+ eÅŸleÅŸtirme: 50 Coin</li>
                        <li>Level tamamlama: 100 Coin</li>
                        <li>GÃ¼nlÃ¼k bonus: 100 Coin</li>
                    </ul>
                    
                    <h3>ğŸ’³ USDT Ã‡ekimi</h3>
                    <ul>
                        <li>1000 Coin = 1 USDT</li>
                        <li>Minimum Ã§ekim: 5 USDT</li>
                        <li>TronLink wallet gerekli</li>
                        <li>24 saat iÃ§inde Ã¶denir</li>
                    </ul>
                </div>
                
                <button id="close-rules-btn" class="action-btn primary">
                    âœ… AnladÄ±m
                </button>
            </div>
        </div>
    </div>

    <!-- Skor animasyonu iÃ§in container -->
    <div id="score-animations"></div>

    <!-- Scripts -->
    <script src="candy-game.js"></script>
    
    <script>
        // Withdraw modal event listeners
        document.getElementById('close-withdraw-btn')?.addEventListener('click', () => {
            document.getElementById('withdraw-modal').classList.add('hidden');
        });
        
        document.getElementById('process-withdraw-btn')?.addEventListener('click', () => {
            const amount = document.getElementById('withdraw-amount').value;
            if (amount >= 5) {
                // CandyCrushGame instance'a eriÅŸim gerekebilir
                if (window.gameInstance) {
                    window.gameInstance.processWithdraw(parseFloat(amount));
                    document.getElementById('withdraw-modal').classList.add('hidden');
                }
            } else {
                alert('Minimum 5 USDT Ã§ekebilirsiniz!');
            }
        });
        
        document.getElementById('close-rules-btn')?.addEventListener('click', () => {
            document.getElementById('rules-modal').classList.add('hidden');
        });
        
        // Game instance'Ä± global olarak sakla
        document.addEventListener('DOMContentLoaded', () => {
            window.gameInstance = new CandyCrushGame();
        });
    </script>
</body>
</html>
